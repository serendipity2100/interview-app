// æŒæ¡: é¦–é€‰é¡¹APIçš„åŸºæœ¬ä½¿ç”¨
import { preferences } from '@kit.ArkData'

// ä½œç”¨: æŒä¹…åŒ–å­˜å‚¨æ•°æ®
// è¯­æ³•: 1. åˆå§‹åŒ–(è·å–)é¦–é€‰é¡¹æ–‡ä»¶
// è¯­æ³•: 2. å¦‚ä½•æ–°å¢æ•°æ®  å¦‚ä½• ä¿®æ”¹æ•°æ®
// æ³¨æ„:
//  ä¿®æ”¹æ•°æ®putSyne å’Œ åˆ é™¤æ•°æ®deleteSync  åªä¼šä¿®æ”¹å†…å­˜ä¸­æ•°æ® ğŸ’¥ğŸ’¥ ä¸èƒ½å¿˜è®°è°ƒç”¨flush()æ–¹æ³•, åŒæ­¥åˆ°ç¡¬ç›˜ä¸­

@Entry
@Component
struct Index {
  xxxFile = preferences.getPreferencesSync(getContext(this), { name: 'xxx2' })

  build() {
    Column() {
      Button('å­˜æ•°æ®åˆ°ç¡¬ç›˜ä¸­')
        .onClick(() => {
          // 1. è·å–-é¦–é€‰é¡¹æ–‡ä»¶

          // 2.æ–°å¢ä¸€æ¡æ•°æ®åˆ°é¦–é€‰é¡¹æ–‡ä»¶ä¸­, é”®å€¼å¯¹ç»“æ„
          this.xxxFile.putSync('list', ['å¼ ä¸‰', 'æå››'])

          // æ³¨æ„:
          // 3. ğŸ’¥ğŸ’¥æŠŠä¿®æ”¹çš„æ•°æ®, åŒæ­¥åˆ°ç¡¬ç›˜ä¸­ - å¾ˆå®¹æ˜“å¿˜è®°
          this.xxxFile.flush()

        })

      Button('è·å–æ•°æ®')
        .onClick(() => {
          // this.xxxFile.getSync('é”®å', é»˜è®¤å€¼)
          const list = this.xxxFile.getSync('list', [])
          AlertDialog.show({ message: JSON.stringify(list,), alignment: DialogAlignment.Center })
        })
      Button('åˆ é™¤æ•°æ®')
        .onClick(() => {
          this.xxxFile.deleteSync('list')
          this.xxxFile.flush()
        })

      Button('ä¿®æ”¹æ•°æ®')
        .onClick(() => {
          //   1. è·å–æ—§æ•°æ®
          const arr = this.xxxFile.getSync('list', []) as string[]

          //   2. ä¿®æ”¹æ—§æ•°æ®
          arr[0] = 'zs'

          //   3. è°ƒç”¨putæ–¹æ³•è¦†ç›–æ—§æ•°æ®
          this.xxxFile.putSync('list', arr)

          this.xxxFile.flush()

        })
    }

  }
}